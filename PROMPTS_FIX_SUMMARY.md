# Исправление проблемы с пустыми промптами при первом запуске

## Проблема
При сборке exe и первом запуске промпты форматирования создавались пустыми, хотя в UI они отображались корректно.

## Причина
1. Промпты включались в PyInstaller bundle (`config/prompts/*.txt`)
2. При первом запуске создавались пустые файлы в директории пользователя
3. Не было механизма копирования промптов из встроенных ресурсов

## Решение

### 1. Добавлена функция `_ensure_prompts_exist()` в `core/config_loader.py`
- Проверяет существование всех файлов промптов
- Проверяет что файлы не пустые
- Копирует промпты из встроенных ресурсов (для .exe) или из `config/prompts` (для разработки)
- Автоматически вызывается при `create_default_configs()`

### 2. Исправлен кеш промптов в `ConfigLoader`
- Добавлена очистка кеша при вызове `load()`
- Теперь изменения промптов корректно загружаются после сохранения

### 3. Обновлен `RapidWhisper.spec`
- Добавлены `config.jsonc.example` и `secrets.json.example` в bundle
- Эти файлы используются для создания дефолтных конфигов при первом запуске

## Как это работает

### При первом запуске .exe:
1. `create_default_configs()` вызывается автоматически
2. Создаются `config.jsonc` и `secrets.json` из примеров
3. `_ensure_prompts_exist()` проверяет промпты
4. Если промпты отсутствуют или пустые, копируются из `sys._MEIPASS/config/prompts/`
5. Пользователь получает полностью рабочее приложение с заполненными промптами

### При разработке:
1. Промпты копируются из `config/prompts/` в текущей директории
2. Если промпты удалены, восстанавливаются автоматически

### При редактировании промптов:
1. Пользователь редактирует промпт в UI
2. Промпт сохраняется в файл через `config_saver.save_prompt()`
3. При следующей загрузке кеш очищается и промпт загружается из файла
4. Изменения применяются корректно

## Тестирование
Все тесты пройдены успешно:
- ✓ Промпты создаются при первом запуске
- ✓ Пустые промпты автоматически заполняются
- ✓ Промпты можно редактировать и изменения сохраняются
- ✓ Кеш корректно очищается при перезагрузке

## Файлы изменены
- `core/config_loader.py` - добавлена функция `_ensure_prompts_exist()`, исправлен кеш
- `RapidWhisper.spec` - добавлены примеры конфигов в bundle

## Результат
✓ При первом запуске exe все промпты создаются и заполняются автоматически  
✓ Промпты можно редактировать в UI и изменения сохраняются  
✓ Промпты корректно загружаются после редактирования  
✓ Обратная совместимость сохранена  

## Для сборки
Просто запустите `build.bat` как обычно. Все необходимые файлы будут автоматически включены в .exe
