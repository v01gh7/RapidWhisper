# Настройки в AppData

## Обзор

Начиная с версии 1.2.0, RapidWhisper сохраняет все настройки в стандартной директории пользователя вместо папки с приложением.

## Расположение настроек

### Windows
```
%APPDATA%\RapidWhisper\.env
```

Полный путь обычно:
```
C:\Users\ИмяПользователя\AppData\Roaming\RapidWhisper\.env
```

### macOS
```
~/Library/Application Support/RapidWhisper/.env
```

### Linux
```
~/.config/RapidWhisper/.env
```

## Преимущества

1. **Безопасность**: API ключи не хранятся в папке с приложением
2. **Стандарт**: Следует стандартам операционной системы
3. **Обновления**: Настройки сохраняются при обновлении приложения
4. **Чистота**: Только один .exe файл для распространения

## Первый запуск

При первом запуске:

1. Приложение создает директорию `%APPDATA%\RapidWhisper`
2. Создает файл `.env` с настройками по умолчанию
3. Показывает приветственное окно с инструкциями
4. Открывает окно настроек для добавления API ключа

## Разработка vs Production

### Режим разработки
Если файл `.env` существует в текущей директории (рядом с `main.py`), он будет использован. Это удобно для разработки.

### Режим production
Если `.env` нет в текущей директории, используется `%APPDATA%\RapidWhisper\.env`. Это режим для собранного .exe файла.

## Функции в коде

### `get_config_dir()`
Возвращает путь к директории конфигурации:
- Windows: `%APPDATA%\RapidWhisper`
- macOS: `~/Library/Application Support/RapidWhisper`
- Linux: `~/.config/RapidWhisper`

### `get_env_path()`
Возвращает путь к файлу `.env`:
1. Сначала проверяет текущую директорию (для разработки)
2. Затем директорию конфигурации (для production)

### `create_default_env()`
Создает файл `.env` с настройками по умолчанию если его нет.

## Миграция с предыдущих версий

Если у вас была версия < 1.2.0:

1. Найдите ваш старый `.env` файл (в папке с приложением)
2. Скопируйте его в `%APPDATA%\RapidWhisper\.env`
3. Или просто запустите новую версию и введите ключи заново

## Сброс настроек

Чтобы сбросить все настройки:

1. Закройте RapidWhisper
2. Удалите папку `%APPDATA%\RapidWhisper`
3. Запустите RapidWhisper снова
4. Пройдите первоначальную настройку

## Резервное копирование

Чтобы сохранить настройки:

1. Откройте `%APPDATA%\RapidWhisper`
2. Скопируйте файл `.env` в безопасное место
3. При необходимости восстановите его обратно

## Для разработчиков

При сборке .exe:

1. `build.bat` НЕ включает `.env` файлы в сборку
2. Приложение автоматически создаст `.env` при первом запуске
3. Пользователь должен добавить свой API ключ через настройки

Это гарантирует что ваши API ключи не попадут в распространяемый .exe файл.
