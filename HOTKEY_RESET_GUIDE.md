# Руководство: Кнопка сброса горячей клавиши

## Что это?

Кнопка 🔄 рядом с полем горячей клавиши позволяет быстро вернуть сохраненное значение без необходимости нажимать активную горячую клавишу.

## Зачем это нужно?

### Проблема
Вы хотите протестировать новую горячую клавишу (например, Ctrl+J), но потом хотите вернуться к старой (Ctrl+Space). Если вы попытаетесь нажать Ctrl+Space в поле, это запустит запись!

### Решение
Просто нажмите кнопку 🔄 - значение автоматически вернется к сохраненному.

## Как использовать

### Базовое использование

1. **Откройте настройки** (трей → Настройки)
2. **Перейдите в "Приложение"**
3. **Измените горячую клавишу** (например, на Ctrl+J)
4. **Передумали?** Нажмите кнопку 🔄
5. **Значение вернется** к сохраненному (ctrl+space)

### Визуально

```
┌─────────────────────────────────────────┐
│ Горячая клавиша:                        │
│ ┌──────────────────────────┐  ┌────┐   │
│ │ ctrl+j                   │  │ 🔄 │ ← Нажмите сюда
│ └──────────────────────────┘  └────┘   │
└─────────────────────────────────────────┘
                ↓
┌─────────────────────────────────────────┐
│ Горячая клавиша:                        │
│ ┌──────────────────────────┐  ┌────┐   │
│ │ ctrl+space               │  │ 🔄 │   │
│ └──────────────────────────┘  └────┘   │
└─────────────────────────────────────────┘
```

## Сценарии использования

### Сценарий 1: Тестирование
```
1. Текущая клавиша: ctrl+space
2. Хочу протестировать: ctrl+j
3. Кликаю на поле → нажимаю Ctrl+J
4. Закрываю настройки, тестирую Ctrl+J
5. Не понравилось
6. Открываю настройки снова
7. Нажимаю 🔄 → вернулось ctrl+space
8. Сохраняю
```

### Сценарий 2: Случайное нажатие
```
1. Открыл настройки
2. Случайно кликнул на поле
3. Случайно нажал F5
4. Поле показывает: f5
5. Нажимаю 🔄 → вернулось ctrl+space
6. Закрываю настройки
```

### Сценарий 3: Отмена изменений
```
1. Изменил несколько настроек
2. Изменил горячую клавишу на ctrl+shift+r
3. Передумал менять горячую клавишу
4. Нажимаю 🔄 → вернулось ctrl+space
5. Продолжаю редактировать другие настройки
6. Сохраняю
```

## Важно!

### ✅ Что делает кнопка
- Загружает **текущее сохраненное** значение из .env
- Устанавливает его в поле
- Убирает фокус с поля

### ❌ Что НЕ делает кнопка
- НЕ сохраняет настройки автоматически
- НЕ отменяет изменения других настроек
- НЕ закрывает окно настроек

### 💡 Подсказка
Если вы нажали 🔄, но хотите сохранить другое значение:
1. Кликните на поле снова
2. Нажмите нужное сочетание
3. Нажмите "Сохранить"

## Тестирование

Запустите тест:
```bash
uv run python test_hotkey_input.py
```

В тестовом окне:
1. Начальное значение: `ctrl+space`
2. Кликните на поле, нажмите Ctrl+J
3. Значение изменится на `ctrl+j`
4. Нажмите кнопку 🔄
5. Значение вернется к `ctrl+space`

## Преимущества

✅ **Быстро** - один клик вместо ручного ввода  
✅ **Безопасно** - не запускает запись  
✅ **Удобно** - не нужно помнить старое значение  
✅ **Интуитивно** - иконка 🔄 понятна всем  

## Часто задаваемые вопросы

### Q: Что произойдет, если я нажму 🔄 без изменений?
A: Ничего - значение останется прежним.

### Q: Сохраняется ли значение после нажатия 🔄?
A: Нет, нужно нажать кнопку "Сохранить" в настройках.

### Q: Можно ли отменить нажатие 🔄?
A: Да, просто кликните на поле и введите нужное значение снова.

### Q: Что если я изменил и сохранил новую клавишу?
A: Кнопка 🔄 теперь будет возвращать новое сохраненное значение.

## Технические детали

### Что происходит при нажатии
```python
def _reset_hotkey(self):
    # 1. Читаем сохраненное значение
    current_hotkey = self.config.hotkey
    
    # 2. Устанавливаем в поле
    self.hotkey_edit.setText(current_hotkey)
    
    # 3. Убираем фокус
    self.hotkey_edit.clearFocus()
    
    # 4. Логируем
    logger.info(f"Горячая клавиша сброшена на: {current_hotkey}")
```

### Откуда берется значение
- Из `self.config.hotkey`
- Это значение загружается из .env файла
- Обновляется при сохранении настроек

## Статус

🟢 **Готово к использованию**

Кнопка работает корректно и протестирована.
