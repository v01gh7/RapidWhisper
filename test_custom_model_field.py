"""
–¢–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏.
"""
import sys
from PyQt6.QtWidgets import QApplication
from core.config import Config
from ui.settings_window import SettingsWindow


def test_custom_model_field():
    """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –ø–æ–ª–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç."""
    app = QApplication(sys.argv)
    
    # –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ config.jsonc
    config = Config.load_from_config()
    
    # –°–æ–∑–¥–∞—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    settings_window = SettingsWindow(config)
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    assert hasattr(settings_window, 'post_processing_custom_model_edit'), \
        "–ü–æ–ª–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–µ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    assert hasattr(settings_window, 'post_processing_custom_model_label'), \
        "–ú–µ—Ç–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    
    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–æ–ª–µ
    test_model = "gpt-4-turbo-preview"
    settings_window.post_processing_custom_model_edit.setText(test_model)
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
    assert settings_window.post_processing_custom_model_edit.text() == test_model, \
        f"–ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: {settings_window.post_processing_custom_model_edit.text()}"
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª–µ –≤–∫–ª—é—á–µ–Ω–æ/–≤—ã–∫–ª—é—á–µ–Ω–æ –≤–º–µ—Å—Ç–µ —Å –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–æ–π
    settings_window.enable_post_processing_check.setChecked(True)
    assert settings_window.post_processing_custom_model_edit.isEnabled(), \
        "–ü–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ –∫–æ–≥–¥–∞ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞"
    
    settings_window.enable_post_processing_check.setChecked(False)
    assert not settings_window.post_processing_custom_model_edit.isEnabled(), \
        "–ü–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–æ –∫–æ–≥–¥–∞ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞"
    
    print("‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã!")
    print(f"   - –ü–æ–ª–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
    print(f"   - –ú–µ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
    print(f"   - –ó–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    print(f"   - –ü–æ–ª–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è/–≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–æ–π")
    
    # –ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
    settings_window.show()
    
    # –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∏–Ω–¥–µ–∫—Å 3)
    settings_window.sidebar.setCurrentRow(3)
    
    print("\nüìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:")
    print("   1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É '–û–±—Ä–∞–±–æ—Ç–∫–∞' (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞)")
    print("   2. –í–∫–ª—é—á–∏—Ç–µ '–í–∫–ª—é—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–∞'")
    print("   3. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (groq, openai, glm, llm)")
    print("   4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª–µ '–ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å' –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è")
    print("   5. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: gpt-4-turbo-preview)")
    print("   6. –ù–∞–∂–º–∏—Ç–µ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'")
    print("   7. –ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª")
    
    sys.exit(app.exec())


if __name__ == "__main__":
    test_custom_model_field()
